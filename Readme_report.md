# クラウドプログラミング演習　最終課題
## リポジトリURL:https://github.com/k21rs012/CP_report_ver.1

## 概要
今回のレポートは下記にも記載するが、ニフクラ mobile backend様の「サンプル＆チュートリアル一覧 アプリにログイン機能をつけよう！」をベースに作成した。  
ログイン時の処理は全てベースとなるプログラムがしているので私はデータベースを接続した。  
今回私が作成した部分はログイン成功時のコンテンツを作成した。  
まず下記にも記載するが、富士通クラウドテクノロジーズ株式会社様の「はじめての Monaca と mobile backend ～DBの使い方練習～」を参考におみくじ機能を作成した。これはデータベースに結果を予め保存しておき、その結果をランダムで読み取って表示するものである。
次に第10回で使用した遊戯王のCSVファイルをデータベースに取り込み、モンスターをランダムでAとBにそれぞれ1体ずつ読み取り、そのモンスターの攻撃力と防御力を計算してHPから値を引き、残りのHPの状態で勝敗を判定するプログラムを作成した。


## 工夫した点
遊戯王のCSVファイルを元に勝敗の判定を行う部分だが、Githubの作成初期を見ていただければ分かる通り最初はif文を多用してHPの計算と勝敗の判定を行っていた。だが、これではコードが美しくなく、コードを見る側としてもとても分かりづらいものとなってしまっていた。なんで極力if文を使わないようにHPによる勝敗判定を三項演算子を使用して行うようにした。
```java
result = hpA > hpB ? "Aの勝ちです。" : hpA < hpB ? "Bの勝ちです。" : "引き分けです。";
```
また、if文を少なくするために予めHPの計算を変数宣言内に組込んだり、不要な条件分岐を削除することでより見やすく、そして処理の高速化を図った。
```java
var hpA = 8000 + (dfA - atkB);
var hpB = 8000 + (dfB - atkA);
var result = '';

if ((dfA - atkB) >= 0) {
    hpA = 8000;
    hpB = 8000 + (dfB - atkA);
} else if ((dfB - atkA) >= 0) {
    hpA = 8000 + (dfA - atkB);
    hpB = 8000;
}
```


## 今回レポートを作成するにあたって参考にさせていただいたプログラムや資料
- サンプル＆チュートリアル一覧 アプリにログイン機能をつけよう！,ニフクラ mobile backend,https://github.com/NIFCLOUD-mbaas/monaca_login_template ,閲覧 2022/12/19  
- はじめての Monaca と mobile backend ～DBの使い方練習～,富士通クラウドテクノロジーズ株式会社,https://qiita.com/natsumo/items/d278c71c0211a7902767 ,閲覧 2022/12/19